# Prepare

After git clone update submodules:
```
git submodule update --init --recursive
```

Download PSPDEV: https://pspdev.github.io/downloads.html
Extract to $HOME, e.g.:
```
tar xvf pspdev-macos-latest-arm64.tar.gz -C $HOME
```

Download and install PPSSPP: https://www.ppsspp.org/download/

# Configure build

Import environment:
```
source ./build_env.sh
```

Create build directory:
```
./configure_cross.sh
```

# Build and run

Run in simulator:
```
ninja -C builddir/ run
```

Run on host:
```
ninja -C builddir/ host_run
```

# Release build

Create a release on GitHub (use the next version number for the tag):
```
git tag v0.0.1
git push origin v0.0.1
```

# Web build

Prepare Emscripten SDK first:

Download EMSDK: https://github.com/emscripten-core/emsdk/archive/refs/tags/4.0.16.tar.gz
Extract to $HOME/emsdk, e.g.:
```
mkdir $HOME/emsdk && tar xf emsdk-4.0.16.tar.gz -C $HOME/emsdk --strip-components=1
cd $HOME/emsdk
./emsdk install latest
./emsdk activate latest
```

Import environment:
```
source ./build_env_web.sh
```

Create build directory:
```
./configure_web.sh
```

Run in the browser (Press ESC in console to stop http-server)
```
ninja -C builddir.web web_run
```

Build archive with binaries for deployment:
```
ninja -C builddir.web gameLD58web.zip
```
